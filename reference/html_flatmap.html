<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Use html_flatmap() when you want to select further sub-elements
for each element of a collection.
html_flatmap() allows you to apply a function to each element of
a selenider_elements object, provided that the function returns a
selenider_element/selenider_elements object itself. The result will
then be flattened into a single selenider_elements object. The benefit
of this over traditional iteration techniques is that the laziness of the
elements will be maintained, and nothing will be fetched from the DOM.
element_list() transforms a selenider_elements object into a list of
selenider_element objects. The result can then be used in for loops and
higher order functions like lapply()/purrr::map() (whereas a selenider_element
object cannot)
html_flatmap() works by executing .f on a mock element, then recording the
results in x. This means that no matter the length of x, .f is only evaluated
once, and during the html_flatmap() call. For this reason, .f should not invoke
any side effects or do anything other than selecting sub-elements.
element_list() essentially turns x into:
list(x[[1]], x[[2]], ...)
However, to do this, the length of x must be computed. This means that while
each element inside the list is still lazy, the list itself cannot be considered
lazy, since the number of elements in the DOM may change. To avoid problems, it is
recommended to use an element list just after it is created, to make sure the
list is an accurate representation of the DOM when it is being used."><title>Iterate over an element collection — html_flatmap • selenider</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Iterate over an element collection — html_flatmap"><meta property="og:description" content="Use html_flatmap() when you want to select further sub-elements
for each element of a collection.
html_flatmap() allows you to apply a function to each element of
a selenider_elements object, provided that the function returns a
selenider_element/selenider_elements object itself. The result will
then be flattened into a single selenider_elements object. The benefit
of this over traditional iteration techniques is that the laziness of the
elements will be maintained, and nothing will be fetched from the DOM.
element_list() transforms a selenider_elements object into a list of
selenider_element objects. The result can then be used in for loops and
higher order functions like lapply()/purrr::map() (whereas a selenider_element
object cannot)
html_flatmap() works by executing .f on a mock element, then recording the
results in x. This means that no matter the length of x, .f is only evaluated
once, and during the html_flatmap() call. For this reason, .f should not invoke
any side effects or do anything other than selecting sub-elements.
element_list() essentially turns x into:
list(x[[1]], x[[2]], ...)
However, to do this, the length of x must be computed. This means that while
each element inside the list is still lazy, the list itself cannot be considered
lazy, since the number of elements in the DOM may change. To avoid problems, it is
recommended to use an element list just after it is created, to make sure the
list is an accurate representation of the DOM when it is being used."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">selenider</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/test-site.html">test-site</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ashbythorpe/selenider/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Iterate over an element collection</h1>
      <small class="dont-index">Source: <a href="https://github.com/ashbythorpe/selenider/blob/HEAD/R/flatmap.R" class="external-link"><code>R/flatmap.R</code></a></small>
      <div class="d-none name"><code>html_flatmap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use <code>html_flatmap()</code> when you want to select further sub-elements
<em>for each</em> element of a collection.</p>
<p><code>html_flatmap()</code> allows you to apply a function to each element of
a <code>selenider_elements</code> object, provided that the function returns a
<code>selenider_element</code>/<code>selenider_elements</code> object itself. The result will
then be flattened into a single <code>selenider_elements</code> object. The benefit
of this over traditional iteration techniques is that the laziness of the
elements will be maintained, and nothing will be fetched from the DOM.</p>
<p><code>element_list()</code> transforms a <code>selenider_elements</code> object into a list of
<code>selenider_element</code> objects. The result can then be used in for loops and
higher order functions like <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code>/<code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> (whereas a <code>selenider_element</code>
object cannot)</p>
<p><code>html_flatmap()</code> works by executing <code>.f</code> on a mock element, then recording the
results in <code>x</code>. This means that no matter the length of <code>x</code>, <code>.f</code> is only evaluated
once, and during the <code>html_flatmap()</code> call. For this reason, <code>.f</code> should not invoke
any side effects or do anything other than selecting sub-elements.</p>
<p><code>element_list()</code> essentially turns <code>x</code> into:
<code>list(x[[1]], x[[2]], ...)</code>
However, to do this, the length of <code>x</code> must be computed. This means that while
each element inside the list is still lazy, the list itself cannot be considered
lazy, since the number of elements in the DOM may change. To avoid problems, it is
recommended to use an element list just after it is created, to make sure the
list is an accurate representation of the DOM when it is being used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">html_flatmap</span><span class="op">(</span><span class="va">x</span>, <span class="va">.f</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">element_list</span><span class="op">(</span><span class="va">x</span>, timeout <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A <code>selenider_elements</code> object.</p></dd>


<dt>.f</dt>
<dd><p>A function to apply to each element of <code>x</code>.</p></dd>


<dt>...</dt>
<dd><p>Passed into <code>.f</code>.</p></dd>


<dt>timeout</dt>
<dd><p>How long to wait for <code>x</code> to exist while computing its length.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>html_flatmap()</code> returns a <code>selenider_element</code> object.
<code>element_list()</code> returns a list of <code>selenider_element</code> objects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">html</span> <span class="op">&lt;-</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">&lt;div id='div1'&gt;</span></span></span>
<span class="r-in"><span><span class="st">  &lt;p&gt;Text 1&lt;/p&gt;</span></span></span>
<span class="r-in"><span><span class="st">&lt;/div&gt;</span></span></span>
<span class="r-in"><span><span class="st">&lt;div id='div2'&gt;</span></span></span>
<span class="r-in"><span><span class="st">  &lt;p&gt;Text 2&lt;/p&gt;</span></span></span>
<span class="r-in"><span><span class="st">&lt;/div&gt;</span></span></span>
<span class="r-in"><span><span class="st">&lt;div id='div3'&gt;</span></span></span>
<span class="r-in"><span><span class="st">  &lt;p&gt;Text 3&lt;/p&gt;</span></span></span>
<span class="r-in"><span><span class="st">&lt;/div&gt;</span></span></span>
<span class="r-in"><span><span class="st">&lt;div id='div4'&gt;</span></span></span>
<span class="r-in"><span><span class="st">  &lt;p&gt;Text 4&lt;/p&gt;</span></span></span>
<span class="r-in"><span><span class="st">&lt;/div&gt;</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">session</span> <span class="op">&lt;-</span> <span class="fu"><a href="minimal_selenider_session.html">minimal_selenider_session</a></span><span class="op">(</span><span class="va">html</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpLZl2AD/file18833ff9731b.html"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">divs</span> <span class="op">&lt;-</span> <span class="fu"><a href="s.html">ss</a></span><span class="op">(</span><span class="st">"div"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get the &lt;p&gt; tag inside each div.</span></span></span>
<span class="r-in"><span><span class="va">divs</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">html_flatmap</span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">|&gt;</span> <span class="fu"><a href="html_element.html">html_element</a></span><span class="op">(</span><span class="st">"p"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A collection of selenider elements selecting:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> The elements with css selector <span style="color: #0000BB;">"div"</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> The first child of each element with css selector <span style="color: #0000BB;">"p"</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or:</span></span></span>
<span class="r-in"><span><span class="va">p_tags</span> <span class="op">&lt;-</span> <span class="va">divs</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">html_flatmap</span><span class="op">(</span><span class="va">html_element</span>, <span class="st">"p"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To get the text in each tag, we can't use html_flatmap()</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">elem</span> <span class="kw">in</span> <span class="fu">element_list</span><span class="op">(</span><span class="va">p_tags</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="html_text.html">html_text</a></span><span class="op">(</span><span class="va">elem</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> list()</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu">element_list</span><span class="op">(</span><span class="va">p_tags</span><span class="op">)</span>, <span class="va">html_text</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> list()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> list()</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \dontshow{</span></span></span>
<span class="r-in"><span><span class="co"># Clean up all connections and invalidate default chromote object</span></span></span>
<span class="r-in"><span><span class="fu"><a href="selenider_cleanup.html">selenider_cleanup</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ashby Thorpe.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

